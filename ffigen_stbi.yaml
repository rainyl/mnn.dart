# Run with `dart --enable-experiment=native-assets run ffigen --config ffigen_stbi.yaml`.
name: NativeSTBI
description: |
  Bindings for `stb_image`.

  Regenerate bindings with `dart --enable-experiment=native-assets run ffigen --config ffigen_stbi.yaml`.
output: "lib/src/g/stbi.g.dart"
ffi-native:
  asset-id: "package:mnn/stbi.dart"
compiler-opts:
  - "-Isrc -Isrc/MNN -Wno-nullability-completeness"
  # - "-DSTBI_WINDOWS_UTF8"
  # - "-fdeclspec"
sort: true
silence-enum-warning: true
include-unused-typedefs: false
headers:
  entry-points:
    - "src/stb_image.h"
    - "src/stb_image_resize2.h"
    - "src/mnn_stb_image.h"
  include-directives:
    - "src/stb_image.h"
    - "src/stb_image_resize2.h"
    - "src/mnn_stb_image.h"
functions:
  symbol-address:
    include:
      - '.*destroy.*'
      - '.*free.*'
enums:
  rename:
    'stbir_pixel_layout': 'StbirPixelLayout'
    'stbir_edge': 'StbirEdge'
    'stbir_filter': 'StbirFilter'
    'stbir_datatype': 'StbirDataType'

preamble: |
  // Copyright (c) 2025, rainyl.  Please see the AUTHORS file
  // for details. All rights reserved. Use of this source code is governed by a
  // BSD-style license that can be found in the LICENSE file.
comments:
  style: any
  length: full
